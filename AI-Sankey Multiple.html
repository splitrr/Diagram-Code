<!DOCTYPE html>
<html>
<head>
  <title>Sankey Diagram</title>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
  <div>
    <label for="flowSelect">Select Flow:</label>
    <select id="flowSelect" onchange="drawChart()">
      <option value="current_use_flows">Current Use Flows</option>
      <option value="research_funding_flows">Research Funding Flows</option>
      <option value="market_share_flows">Market Share Flows</option>
    </select>
    <button onclick="exportChart()">Export to PNG</button>
  </div>
  <div id="sankey_multiple" style="width: 900px; height: 300px;"></div>
  <script type="text/javascript">
    google.charts.load("current", {packages:["sankey"]});
    google.charts.setOnLoadCallback(drawChart);

    current_use_flows = [
      ['Legacy Rules-Based Systems', 'Symbolic AI', 40.0],
      ['External Knowledge Sources', 'Generative AI', 1.05],
      ['External Knowledge Sources', 'Computer vision', 0.385],
      ['Generative AI', 'AI', 10.0],
      ['Robotics', 'AI', 5.0],
      ['Computer vision', 'AI', 10.0],
      ['Artificial general Intelligence (AGI)', 'AI', 1.0],
      ['Artificial Super Intelligence (ASI)', 'AI', 0.5],
      ['ML', 'AI', 60.0],
      ['ML', 'ANI Artificial Narrow Intelligence', 18.0],
      ['Legacy Rules-Based Systems', 'ANI Artificial Narrow Intelligence', 12.0],
      ['ANI Artificial Narrow Intelligence', 'AI', 18.0],
      ['ANI Artificial Narrow Intelligence', 'Symbolic AI', 12.0],
      ['Deep learning', 'ML', 35.0],
      ['Probabilistic methods', 'ML', 5.0],
      ['Evolutionary algorithms', 'ML', 5.0],
      ['ML', 'Artificial general Intelligence (AGI)', 2.0],
      ['ML', 'Artificial Super Intelligence (ASI)', 1.0],
      ['ML', 'Generative AI', 10.0],
      ['ML', 'Robotics', 5.0],
      ['ML', 'Computer vision', 7.0],
      ['Legacy Rules-Based Systems', 'Robotics', 2.0],
      ['Legacy Rules-Based Systems', 'Computer vision', 1.0],
      ['Legacy Rules-Based Systems', 'Generative AI', 0.7],
      ['Supervised Learning', 'ML', 60.0],
      ['Unsupervised Learning', 'ML', 25.0],
      ['Semi-Supervised Learning', 'ML', 10.0],
      ['Reinforcement Learning', 'ML', 5.0],
      
      // New flows for Deep Learning
      ['Supervised Learning', 'Deep learning', 30.0],
      ['Unsupervised Learning', 'Deep learning', 20.0],
      ['Semi-Supervised Learning', 'Deep learning', 8.0],
      ['Reinforcement Learning', 'Deep learning', 2.0],
      ['Probabilistic methods', 'Deep learning', 5.0],
      ['Evolutionary algorithms', 'Deep learning', 3.0],
      ['External Knowledge Sources', 'Deep learning', 2.0]
];

research_funding_flows = [
['Legacy Rules-Based Systems', 'Symbolic AI', 5.0],
    ['Generative AI', 'AI', 30.0],
    ['Robotics', 'AI', 15.0],
    ['Computer vision', 'AI', 15.0],
    ['Artificial general Intelligence (AGI)', 'AI', 10.0],
    ['Artificial Super Intelligence (ASI)', 'AI', 1.0],
    ['ML', 'AI', 80.0],
    ['ML', 'ANI Artificial Narrow Intelligence', 14.0],
    ['Legacy Rules-Based Systems', 'ANI Artificial Narrow Intelligence', 4.0],
    ['ANI Artificial Narrow Intelligence', 'AI', 14.0],
    ['ANI Artificial Narrow Intelligence', 'Symbolic AI', 4.0],
    ['Deep learning', 'ML', 50.0],
    ['Probabilistic methods', 'ML', 5.0],
    ['Evolutionary algorithms', 'ML', 5.0],
    ['ML', 'Artificial general Intelligence (AGI)', 2.0],
    ['ML', 'Artificial Super Intelligence (ASI)', 1.0],
    ['ML', 'Generative AI', 10.0],
    ['ML', 'Robotics', 5.0],
    ['ML', 'Computer vision', 7.0],
    ['Supervised Learning', 'ML', 50.0],
    ['Unsupervised Learning', 'ML', 20.0],
    ['Semi-Supervised Learning', 'ML', 15.0],
    ['Reinforcement Learning', 'ML', 15.0],
    ['Supervised Learning', 'Deep learning', 25.0],
    ['Unsupervised Learning', 'Deep learning', 15.0],
    ['Semi-Supervised Learning', 'Deep learning', 7.5],
    ['Reinforcement Learning', 'Deep learning', 7.5],
    ['Probabilistic methods', 'Deep learning', 5.0],
    ['Evolutionary algorithms', 'Deep learning', 3.0]
];

market_share_flows = [
    ['Legacy Rules-Based Systems', 'Symbolic AI', 30.0],
    ['Generative AI', 'AI', 15.0],
    ['Robotics', 'AI', 10.0],
    ['Computer vision', 'AI', 15.0],
    ['Artificial general Intelligence (AGI)', 'AI', 0.5],
    ['Artificial Super Intelligence (ASI)', 'AI', 0.1],
    ['ML', 'AI', 70.0],
    ['ML', 'ANI Artificial Narrow Intelligence', 20.0],
    ['Legacy Rules-Based Systems', 'ANI Artificial Narrow Intelligence', 10.0],
    ['ANI Artificial Narrow Intelligence', 'AI', 20.0],
    ['ANI Artificial Narrow Intelligence', 'Symbolic AI', 10.0],
    ['Deep learning', 'ML', 50.0],
    ['Probabilistic methods', 'ML', 5.0],
    ['Evolutionary algorithms', 'ML', 5.0],
    ['ML', 'Artificial general Intelligence (AGI)', 2.0],
    ['ML', 'Artificial Super Intelligence (ASI)', 1.0],
    ['ML', 'Generative AI', 10.0],
    ['ML', 'Robotics', 5.0],
    ['ML', 'Computer vision', 7.0],
    ['Supervised Learning', 'ML', 55.0],
    ['Unsupervised Learning', 'ML', 25.0],
    ['Semi-Supervised Learning', 'ML', 10.0],
    ['Reinforcement Learning', 'ML', 10.0],
    ['Supervised Learning', 'Deep learning', 27.5],
    ['Unsupervised Learning', 'Deep learning', 12.5],
    ['Semi-Supervised Learning', 'Deep learning', 5.0],
    ['Reinforcement Learning', 'Deep learning', 5.0],
    ['Probabilistic methods', 'Deep learning', 5.0],
    ['Evolutionary algorithms', 'Deep learning', 2.5]
];  
    var chart;
    function drawChart() {
      var selectedFlow = document.getElementById('flowSelect').value;
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'From');
      data.addColumn('string', 'To');
      data.addColumn('number', 'Weight');

      if (selectedFlow === 'current_use_flows') {
        data.addRows(current_use_flows);
      } else if (selectedFlow === 'research_funding_flows') {
        data.addRows(research_funding_flows);
      } else if (selectedFlow === 'market_share_flows') {
        data.addRows(market_share_flows);
      }
      //4
      var colors = [
        '#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854',
        '#ffd92f', '#e5c494', '#b3b3b3', '#1b9e77', '#d95f02',
        '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d',
        '#666666', '#f4a582', '#92c5de', '#d73027', '#4575b4'
      ];
      var options = {
        width: 1500,
        height: 750,

        sankey: {
          node: {
            nodePadding: 45,
            colors: colors,
            width: 5,
            iterations: 100,

            label: {
              fontSize: 20,
              fontName: 'Lato',
              bold: false,
              italic: false,
              color: '#000000',
            }
          },
          link: {
            colorMode: 'gradient',
            colors: colors
          }
        }
      };
      chart = new google.visualization.Sankey(document.getElementById('sankey_multiple'));
      chart.draw(data, options);

    }
    function exportChart() {
      html2canvas(document.getElementById('sankey_multiple')).then(function(canvas) {
        var link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = 'sankey_chart.png';
        link.click();
      });
    }
  </script>
</body>
</html>